<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloudflare R2 Ping Test - Test Latency to R2 Buckets Across Regions</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.png" type="image/png">
    <meta name="description" content="Test latency and performance to Cloudflare R2 buckets across different regions worldwide. Compare caching scenarios and optimize your R2 deployment.">
    <meta name="keywords" content="Cloudflare R2, latency test, ping test, performance, CDN, edge computing, regions">
    <!-- Chart.js from Cloudflare CDN for minimal progress visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js" integrity="sha512-6HrPqAvK+lZElIZ4mZ64fyxIBTsaX5zAFZg2V/2WT+iKPrFzTzvx6QAsLW2OaLwobhMYBog/+bvmIEEGXi0p1w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header-title">
                Cloudflare R2 Ping Test
            </h1>
            <p>Test latency to R2 buckets across different regions with various caching configurations</p>
        </div>
    </header>

    <main class="container">
        <section class="test-controls">
            <div class="control-panel" style="margin-top: 24px;">
                <div class="controls-grid">
                    <div class="controls-row">
                        <div class="control-group">
                            <label for="test-scenario">Test Scenario:</label>
                            <select id="test-scenario" class="control-select small-select" style="min-width: 260px;">
                                <option value="custom-no-cache">Custom Domain - No Cache</option>
                                <option value="custom-cache">Custom Domain - With Cache</option>
                                <option value="dev">Public Development (r2.dev)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="test-region">Region:</label>
                            <select id="test-region" class="control-select small-select">
                                <option value="all">All Regions</option>
                                <option value="eeur">Eastern Europe (EEUR)</option>
                                <option value="wnam">Western North America (WNAM)</option>
                                <option value="enam">Eastern North America (ENAM)</option>
                                <option value="oc">Oceania (OC)</option>
                                <option value="weur">Western Europe (WEUR)</option>
                                <option value="apac">Asia Pacific (APAC)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="ping-count">Ping Count:</label>
                            <input type="number" id="ping-count" class="control-input small-input" min="1" max="1000" value="10" oninput="if(this.value>1000)this.value=1000;">
                        </div>
                        <div class="control-group">
                            <button id="start-test" class="test-button small-button">
                                <span class="button-text">Start Test</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="results-section">
            <div id="results-container" class="results-container">
                <div class="no-results">
                    No tests have been run yet. Click "Start Test" to begin testing latency across different regions.
                </div>
            </div>
            
            <!-- Comparative Chart Section -->
            <div id="comparative-chart-section" class="comparative-chart-section" style="display: none;">
                <div class="chart-header">
                    <div class="chart-title-row">
                        <h3>Latency Comparison</h3>
                        <div class="chart-actions">
                            <button id="download-chart" class="action-button download-button" title="Download chart as image">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7,10 12,15 17,10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                Download
                            </button>
                            <button id="share-twitter" class="action-button twitter-button" title="Share results on X (Twitter)">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                                Share
                            </button>
                        </div>
                    </div>
                    <p>Real-time latency comparison across regions</p>
                </div>
                <div class="chart-container">
                    <canvas id="comparative-chart"></canvas>
                </div>
            </div>
        </section>        <section class="intro-section">
            <h2>What is this tool?</h2>
            <p>
                This website allows you to test the latency (ping) from your browser to Cloudflare R2 buckets 
                located in different regions around the world. You can test three different scenarios to understand 
                how caching affects performance.
            </p>
        </section>

        <section class="test-scenarios">
            <h2>Test Scenarios</h2>
            
            <div class="scenario-grid">
                <div class="scenario-card scenario-dev">
                    <div class="scenario-header">
                        <h3>Public Development Link (r2.dev)</h3>
                        <span class="status-badge not-recommended">Not Recommended for Production</span>
                    </div>
                    <p>
                        Tests ping to public development URLs without cache. These links are provided by Cloudflare 
                        for development purposes and should not be used in production environments.
                    </p>
                    <div class="scenario-features">
                        <span class="feature-tag">‚úó No Cache</span>
                        <span class="feature-tag">‚ö° Direct to Origin</span>
                        <span class="feature-tag">üîì Public Access</span>
                    </div>
                </div>

                <div class="scenario-card scenario-custom-no-cache">
                    <div class="scenario-header">
                        <h3>Custom Domain without Cache</h3>
                        <span class="status-badge recommended">Recommended for Testing</span>
                    </div>
                    <p>
                        Tests ping to custom domains configured to bypass Cloudflare's CDN cache. 
                        This scenario shows the raw performance to R2 without caching benefits.
                    </p>
                    <div class="scenario-features">
                        <span class="feature-tag">‚úó No Cache</span>
                        <span class="feature-tag">üåê Custom Domain</span>
                        <span class="feature-tag">üîí Secure</span>
                    </div>
                </div>

                <div class="scenario-card scenario-custom-cache">
                    <div class="scenario-header">
                        <h3>Custom Domain with Cache</h3>
                        <span class="status-badge best">Best Performance</span>
                    </div>
                    <p>
                        Tests ping to custom domains with Cloudflare CDN caching enabled. 
                        This scenario demonstrates the performance benefits of edge caching.
                    </p>
                    <div class="scenario-features">
                        <span class="feature-tag">‚úì CDN Cache</span>
                        <span class="feature-tag">üåê Custom Domain</span>
                        <span class="feature-tag">‚ö° Edge Optimized</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="region-info">
            <h2>Region Information</h2>
            <div class="region-grid">
                <div class="region-card">
                    <h3>Eastern Europe (EEUR)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Central/Eastern Europe</p>
                        <button class="region-button" onclick="window.open('https://eeur.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://eeur.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>

                <div class="region-card">
                    <h3>Western North America (WNAM)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Western United States & Canada</p>
                        <button class="region-button" onclick="window.open('https://wnam.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://wnam.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>

                <div class="region-card">
                    <h3>Eastern North America (ENAM)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Eastern United States & Canada</p>
                        <button class="region-button" onclick="window.open('https://enam.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://enam.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>

                <div class="region-card">
                    <h3>Oceania (OC)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Australia & New Zealand</p>
                        <button class="region-button" onclick="window.open('https://oc.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://oc.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>

                <div class="region-card">
                    <h3>Western Europe (WEUR)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Western Europe</p>
                        <button class="region-button" onclick="window.open('https://weur.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://weur.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>

                <div class="region-card">
                    <h3>Asia Pacific (APAC)</h3>
                    <div class="region-details">
                        <p><strong>Location:</strong> Asia Pacific Region</p>
                        <button class="region-button" onclick="window.open('https://apac.fernandodilland.com/test-without-cache.json')">File without cache</button>
                        <button class="region-button" onclick="window.open('https://apac.fernandodilland.com/test-with-cache.json')">File with cache</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script src="script.js"></script>
    <footer class="footer">
        <div class="container">
            <p>
                <a class="footer-link" href="https://github.com/fernandodilland/cloudflare-r2-ping-test" target="_blank" rel="noopener">GitHub Repository</a>
                <a class="footer-link" href="https://github.com/fernandodilland/cloudflare-r2-ping-test/blob/main/LICENSE" target="_blank" rel="noopener">MIT License</a>
            </p>
        </div>
    </footer>
</body>
</html>
